<tool id="vkmzIdentifier" name="vkmzIdentifier" version="alpha-0.1">

  <description>identify formulas and determine vk ratios</description>
  
  <requirements>
    <requirement type="package" version="2.7">python</requirement>
    <requirement type="package">pandas</requirement>
    <requirement type="package">numpy</requirement>
  </requirements>
  
  <stdio>
    <exit_code range="1:" level="fatal" />
  </stdio>

  <command detect_errors="aggressive"><![CDATA[
    cd '$__tool_directory__';
    python 'vkmzIdentifier.py'
    -i '$input'
    -o '$output'
    -d '$database'
    -e '$error'
    -m '$multiprocessing'
  ]]></command>

  <inputs>
    <param name="input" label="Data Input" type="data" format="tabular" help="Select input data." />
    <param name="database" label="Database" type="select" help="Choose database for mass look up table.">
      <option value="databases/bmrb-light.csv">Normal</option>
      <option value="databases/bmrb-heavy_carbon.csv">Heavy Carbon</option>
      <option value="databases/bmrb-heavy_nitrogen.csv">Heavy Nitrogen</option>
      <option value="databases/bmrb-heavy.csv">Heavy Carbon and Nitrogen</option>
    </param>
    <param name="error" label="PPM Error" type="integer" value="5" min="0" help="Parts per million mass error. Set according to your mass spectrometer." />
    <param name="multiprocessing" label="Multiprocessing" type="select" display="radio" >
      <option value="False">Off</option>
      <option value="True">On</option>
    </param>
  </inputs>

  <outputs>
    <data name="output" label="${tool.name}_${input.name}" format="tabular"  />
  </outputs>

  <tests>
    <test>
      <param name="input" value="example.mzXML.tsv" />
      <param name="database" value="databases/bmrb-light.csv" />
      <param name="multiprocessing" value="True" />
      <output name="output">
	<assert_contents>
          <has_text text="191.034225464" />
        </assert_contents>
      </output>
    </test>
  </tests>

  <help><![CDATA[

**Authors** - Stephen Brockman (brock197@umn.edu)

**Authors** - Mark Esler (eslerm@umn.edu)

Release notes
-------------

beta-0.01

  ]]></help>

  <citations>
    <citation type="doi">123.456/example.123</citation>
    <!-- Example Title -->
  </citations>

</tool>
